<div dojoType="LayoutContainer"
    layoutChildPriority="left-right"
    style="width: 25%">

<div id="mainTabContainer" dojoType="TabContainer" selectedTab="portlets" doLayout="false">

<div id="definitions" dojoType="ContentPane" label="Definitions">
<div style="height:21px">&nbsp;</div>
<div class="tableContainer">
<table dojoType="EditorTable" widgetId="defsTable" class="permissions" 
        headClass="fixedHeader" tbodyClass="scrollContent" 
        enableMultipleSelect="true" enableAlternateRows="true" 
        rowAlternateClass="alternateRow" 
        templateCssPath="/site/css/security-permissions.css" 
        cellpadding="0" cellspacing="0" border="0">

<col width="100%"></col>

<thead>
<tr>
    <th field="name" dataType="String">Constraint</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div> <!-- tableContainer --> 
</div> <!-- definitions -->

<div id="globals" dojoType="ContentPane" label="Globals">
<div style="height:21px">&nbsp;</div>
<div class="tableContainer">
<table dojoType="EditorTable" widgetId="globalsTable" class="permissions" 
        headClass="fixedHeader" tbodyClass="scrollContent" 
        enableMultipleSelect="true" enableAlternateRows="true" 
        rowAlternateClass="alternateRow" 
        templateCssPath="/site/css/security-permissions.css" 
        cellpadding="0" cellspacing="0" border="0">

<col width="100%"></col>

<thead>
<tr>
    <th field="name" dataType="String">Constraint</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div> <!-- tableContainer --> 
</div> <!-- globals --> 
</div> <!-- mainTabContainer -->

</div> <!-- full layout container -->

<div dojoType="LayoutContainer"
    layoutChildPriority="left-right"
    style="width: 25%">
</div>

<script language="JavaScript" type="text/javascript">

function getNewEntryPrototype()
{
    return { name: "", actions: "", roles: "" };
}

function addListeners()
{
    var defsTable = dojo.widget.byId("defsTable");
//    dojo.event.connect( "around", defsTable, "onUISelect", "listSelectionChangeOk" );
//    dojo.event.connect(defsTable, "onSelect", function(e) 
//    {
//        processTableRowEvent(e, "defsTable");
//    });
//    dojo.event.connect(defsTable, "updateEditor", updateEditor );
//    dojo.event.connect(defsTable, "saveEntrySubmit", saveEntrySubmit );
//    dojo.event.connect(defsTable, "clearAndDisableEditor", clearAndDisableEditor );
    defsTable.getNewEntryPrototype = getNewEntryPrototype;
    var data = [] ;
#foreach($def in $model.get("defs"))
    data.push( { name: "$def.Name", Id: $velocityCount } );    
#end
    defsTable.js_masterdata = data;
    defsTable.js_type = "def";
    defsTable.saveWarningDialogWidgetId = "SaveWarningDialog";
    defsTable.parseData( defsTable.js_masterdata );
    defsTable.render( true );
    
    var globalsTable = dojo.widget.byId("globalsTable");
//    dojo.event.connect( "around", globalsTable, "onUISelect", "listSelectionChangeOk" );
//    dojo.event.connect(globalsTable, "onSelect", function(e) 
//    {
//        processTableRowEvent(e, "globalsTable");
//    });
//    dojo.event.connect(globalsTable, "updateEditor", updateEditor );
//    dojo.event.connect(globalsTable, "saveEntrySubmit", saveEntrySubmit );
//    dojo.event.connect(globalsTable, "clearAndDisableEditor", clearAndDisableEditor );
    globalsTable.getNewEntryPrototype = getNewEntryPrototype;
    var data = [] ;
#foreach($global in $model.get("globals"))
    data.push( { name: "$global", Id: $velocityCount } );    
#end
    globalsTable.js_masterdata = data;
    globalsTable.js_type = "def";
    globalsTable.saveWarningDialogWidgetId = "SaveWarningDialog";
    globalsTable.parseData( globalsTable.js_masterdata );
    globalsTable.render( true );
    
}

		dojo.addOnLoad( window.addListeners );
</script>