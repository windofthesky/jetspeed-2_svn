<?xml version="1.0" encoding="UTF-8"?>

<project default="java:jar"
         xmlns:j="jelly:core"
         xmlns:artifact="artifact"
         xmlns:maven="jelly:maven"
         xmlns:define="jelly:define">


  <!-- ================================================================ -->
  <!-- Hot Deploy for mundane everyday development under Catalina       -->
  <!-- ================================================================ -->
  <goal name="hotdeploy">
    <echo message="Hot Deploying ${org.apache.jetspeed.portlet.app.name} to ${org.apache.jetspeed.deploy.war.dir}"/>
    <copy todir="${org.apache.jetspeed.deploy.war.dir}/${org.apache.jetspeed.portlet.app.name}/WEB-INF/classes">
        <fileset dir="${maven.build.dir}/classes">
        </fileset>
    </copy>
    <copy todir="${org.apache.jetspeed.deploy.war.dir}/${org.apache.jetspeed.portlet.app.name}/">
      <fileset dir="./src/webapp"/>
    </copy>
  </goal>

  <preGoal name="hotdeploy">
   <attainGoal name= "java:compile"/>
  </preGoal>

  <goal name="war:install" prereqs="war:war" description="Overrule default war:install to allow install under different name">
     
     <!--  load the custom rss-war pom -->
     <maven:pom var="warPom" projectDescriptor="${basedir}/rss-war.xml"/>
     <!--  install the war using the custom pom -->
     <artifact:install
        artifact="${maven.war.build.dir}/${maven.war.final.name}"
        type="war"
        project="${warPom}"/> 
  </goal>
  
</project>
