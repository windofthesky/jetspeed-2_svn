<html>
<head>
<title>Getting Started with Jetspeed-2</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
body, body td {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt}
h1 {font-size: 18pt}
h2 {font-size: 16pt}
h3 {font-size: 14pt}
h3 {font-size: 12pt}
strong {color: red;}
code {font-size: 10pt;}
.border-1 {border: solid 1px;}
-->
</style>
</head>

<body bgcolor="#FFFFFF" text="#000000">
<h1>Getting Started with Jetspeed 2</h1>
<p>It is expected that the user is familiar with both the <a href="http://maven.apache.org">Apache 
  Maven</a> project tool and the <a href="http://ant.apache.org">Apache Ant</a> 
  build tool.</p>
<h2>Requirements:</h2>
<ul>
  <li><a href="http://ant.apache.org/bindownload.cgi">Ant 1.5</a> or higher</li>
  <li><a href="http://maven.apache.org/start/download.html">Maven 1.0-beta-10</a> 
    or higher</li>
  <li>Java 1.4 or higher</li>
  <li>Servlet 2.3:<br>
    Tomcat 4.1.18-LE w/JDK 1.4<br>
    <b>or</b> <br>
    Tomcat 4.1.24 w/ JDK 1.3</li>
</ul>
<h2>1. Get Maven Ready</h2>
<p>If you have not already done so, download and install Maven.</p>
<!--
<p><strong>NOTE!</strong>: There are 2 jars required by Jetspeed that are <b>NOT 
  </b>available direct through Maven which you will have to download manually.<br>
</p>
<table width="650" border="1" cellspacing="0" cellpadding="3" style="margin-left: 20px">
  <tr> 
    <th width="34%" >Jar</th>
    <th width="66%" >Instructions</th>
  </tr>
  <tr> 
    <td width="34%" ><a href="http://java.sun.com/products/jdbc/download.html#spec">JDBC 
      Standard Extensions 2.0</a></td>
    <td width="66%" >Once downloaded it needs to be renamed to <code>jdbc-se2.0.jar 
      </code>and copied to your ${MAVEN_REPOSITORY}/jdbc-se/jars directory.</td>
  </tr>
  <tr> 
    <td width="34%"><a href="http://java.sun.com/products/jta/">JTA 1.0.1</a></td>
    <td width="66%">Once downloaded it needs to be renamed to jta1.0.1.jar and 
      copied to your ${MAVEN_REPOSITORY}/jta/jars directory.</td>
  </tr>
  <tr>
    <td width="34%"><a href="http://java.sun.com/products/JavaManagement/download.html">jmxri 
      and jmxtools</a></td>
    <td width="66%"> 
      <ol>
        <li> Unzip the jmxri and jmxtools jars into${MAVEN_REPOSITORY}/jmx/jars</li>
        <li>Rename jmxri.jar to jmxri-1.2.1.jar</li>
        <li>Rename jmxtools.jar to jmxtools-1.2.1.jar</li>
      </ol>
    </td>
  </tr>
</table>
-->
<h2>2. build.properties settings:</h2>
<p>Please set these values in your ${USER_HOME}/<code>build.properties</code> 
  file:</p>
<table width="650" border="1" cellspacing="0" cellpadding="3">
  <tr> 
    <th width="134">property</th>
    <th width="229">example</th>
    <th width="261">what is it?</th>
  </tr>
  <tr> 
    <td width="134">catalina.shared.lib</td>
    <td width="229">${CATALINA_HOME}/shared/lib/</td>
    <td width="261">The location of the jars in your Tomcat installation.</td>
  </tr>
  <tr> 
    <td width="134">deploy.war.dir</td>
    <td width="229">${CATALINA_BASE}/webapps/</td>
    <td width="261">The location to deploy web application in Tomcat.</td>
  </tr>
</table>
<h2>3. Build .jar and .war files</h2>
<p>There are two procedures you can follow that will yeild the same results which 
  are to build and install the required jetspeed jars into Maven (for build purposes).</p>
<table width="650" border="1" cellspacing="0" cellpadding="3" valign="top">
  <tr> 
    <th>procedure 1 (short and sweet)</th>
    <th>procedure 2 (long and boring)</th>
  </tr>
  <tr> 
    <td rowspan="6" valign="top"> 
      <p><b>Start the HSQL test server:</b><br>
        cd ${jetspeed-2-home}<br>
        maven start.test.server</p>
      <p><b>Build all jars and wars:<br>
        </b>(in seperate window/terminal session)<br>
        cd ${jetspeed-2-home}<br>
        maven allBuild</p>
    </td>
    <td><b>Start the HSQL test server:</b><br>
      cd ${jetspeed-2-home}<br>
      maven start.test.server</td>
  </tr>
  <tr>
    <td><b>(in seperate window/terminal session)</b></td>
  </tr>
  <tr> 
    <td><b>Build Portlet-API</b><br>
      cd ${jetspeed-2-home}/portlet-api<br>
      maven jar:install</td>
  </tr>
  <tr> 
    <td><b>Build Jetspeed Commons</b><br>
      cd ${jetspeed-2-home}/commons<br>
      maven jar:install</td>
  </tr>
  <tr> 
    <td> <b>Build the demo web application </b><br>
      cd ${jetspeed-2-home}/applications/demo<br>
      maven war</td>
  </tr>
  <tr> 
    <td><b>Build Jetspeed Portal</b><br>
      cd ${jetspeed-2-home}/portal<br>
      maven war</td>
  </tr>
</table>
<h2><br>
  4. Deploying Jetspeed 2</h2>
<p><b>Deploy Jetspeed Portal WAR into Catalina</b></p>
<ol>
  <li>make sure you have terminated the test HSQLserver</li>
  <li>cd ${jetspeed-2-home}</li>
  <li>maven start.production.server</li>
  <li>(in seperate window/terminal session) cd ${jetspeed-2-home}</li>
  <li>maven db.recreate this will recreate the DB to deploy into. &nbsp;WARNING 
    This will drop all the tables and data in the proudction database.</li>
  <li>cd ${jetspeed-2-home}/portal</li>
  <li>maven deploy</li>
</ol>
<p>This will unpack the newly created jetspeed.war file into Tomcat/Catalina</p>
<h2>5. Deploying the demo application</h2>
<p><b>Install the demo web application into Catalina</b></p>
<ol>
  <li>cd ${jetspeed-2-home}/portal</li>
  <li>maven pam.register </li>
  <li>maven pam.deploy </li>
</ol>
<p><strong>NOTE:</strong> Steps 4 and 5 have been combined into the ${jetspeed-2-home}/portal 
  <code>&quot;<b>maven fullDeploy</b>&quot;</code> goal. &nbsp;However, you will 
  still need to manually start the production HSQL server and populate it as defined 
  in steps 4.1 - 4.5.</p>
<h2>6. Start Tomcat</h2>
<p>Run Tomcat, go to http://localhost:8080/jetspeed.</p>
<h2>(Optional) How to undeploy the demo application</h2>
<p><b>To undeploy the demo app</b></p>
<ol>
  <li>cd ${jetspeed-2-home}/portal</li>
  <li>maven pam.undeploy </li>
  <li>The console witll stay open with [done] message, at this point you can ctrl-c 
    to close the deployment tool.</li>
</ol>
<p>&nbsp;</p>
<h2>Addendum</h2>
<p></p>
</body>
</html>
