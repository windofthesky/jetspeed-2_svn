<!--
   - N O D E
-->	

<class-descriptor
    class="org.apache.jetspeed.prefs.om.impl.NodeImpl"
    table="PREFS_NODE"
>
    <documentation>Represents a preferences node.</documentation>
    <field-descriptor
        name="nodeId"
        column="NODE_ID"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    >
    </field-descriptor>
    <field-descriptor
        name="parentNodeId"
        column="PARENT_NODE_ID"
        jdbc-type="INTEGER"
        nullable="true"
    >
    </field-descriptor>
    <field-descriptor
        name="nodeName"
        column="NODE_NAME"
        jdbc-type="VARCHAR"
        nullable="false"
        length="100"
    >
    </field-descriptor>
    <field-descriptor
        name="nodeType"
        column="NODE_TYPE"
        jdbc-type="SMALLINT"
        nullable="false"
    >
    </field-descriptor>
    <field-descriptor
        name="fullPath"
        column="FULL_PATH"
        jdbc-type="VARCHAR"
        nullable="false"
        length="254"
    >
    </field-descriptor>
    <field-descriptor
        name="creationDate"
        column="CREATION_DATE"
        jdbc-type="TIMESTAMP"
        nullable="false"
    >
    </field-descriptor>
    <field-descriptor
        name="modifiedDate"
        column="MODIFIED_DATE"
        jdbc-type="TIMESTAMP"
        nullable="false"
    >
    </field-descriptor>
    <collection-descriptor
        name="nodeKeys"
        element-class-ref="org.apache.jetspeed.prefs.om.impl.PropertyKeyImpl"
        auto-retrieve="true"
        auto-delete="false"
        auto-update="true"
        indirection-table="PREFS_NODE_PROPERTY_KEY"
    >
        <documentation>This is the reference to the property keys allowed for that node.</documentation>
        <fk-pointing-to-this-class column="NODE_ID"/>
        <fk-pointing-to-element-class column="PROPERTY_KEY_ID"/>
    </collection-descriptor>
    <collection-descriptor
        name="nodeProperties"
        element-class-ref="org.apache.jetspeed.prefs.om.impl.PropertyImpl"
        otm-dependent="true"
    >
        <documentation>This is the reference to a node properties.</documentation>
        <inverse-foreignkey field-ref="nodeId"/>
    </collection-descriptor>
</class-descriptor>

<!--
   - P R O P E R T Y  K E Y
-->	

<class-descriptor
    class="org.apache.jetspeed.prefs.om.impl.PropertyKeyImpl"
    table="PREFS_PROPERTY_KEY"
>
    <documentation>Represents a property key.</documentation>
    <field-descriptor
        name="propertyKeyId"
        column="PROPERTY_KEY_ID"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    >
    </field-descriptor>
    <field-descriptor
        name="propertyKeyName"
        column="PROPERTY_NAME"
        jdbc-type="VARCHAR"
        nullable="false"
        length="100"
    >
    </field-descriptor>
    <field-descriptor
        name="propertyKeyType"
        column="PROPERTY_TYPE"
        jdbc-type="SMALLINT"
        nullable="false"
    >
    </field-descriptor>
    <field-descriptor
        name="creationDate"
        column="CREATION_DATE"
        jdbc-type="TIMESTAMP"
        nullable="false"
    >
    </field-descriptor>
    <field-descriptor
        name="modifiedDate"
        column="MODIFIED_DATE"
        jdbc-type="TIMESTAMP"
        nullable="false"
    >
    </field-descriptor>
</class-descriptor>

<!--
   - P R O P E R T Y
-->	

<class-descriptor
    class="org.apache.jetspeed.prefs.om.impl.PropertyImpl"
    table="PREFS_PROPERTY_VALUE"
>
    <documentation>Represents a property key/value pair.</documentation>
    <field-descriptor
        name="propertyValueId"
        column="PROPERTY_VALUE_ID"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    >
    </field-descriptor>
    <field-descriptor
        name="nodeId"
        column="NODE_ID"
        jdbc-type="INTEGER"
        nullable="false"
    >
    </field-descriptor>
    <field-descriptor
        name="propertyKeyId"
        column="PROPERTY_KEY_ID"
        jdbc-type="INTEGER"
        nullable="false"
    >
    </field-descriptor>
    <field-descriptor
        name="booleanPropertyValue"
        column="BOOLEAN_VALUE"
        jdbc-type="BIT"
        nullable="true"
    >
    </field-descriptor>
    <field-descriptor
        name="datePropertyValue"
        column="DATETIME_VALUE"
        jdbc-type="TIMESTAMP"
        nullable="true"
    >
    </field-descriptor>
    <field-descriptor
        name="longPropertyValue"
        column="LONG_VALUE"
        jdbc-type="INTEGER"
        nullable="true"
    >
    </field-descriptor>
    <field-descriptor
        name="doublePropertyValue"
        column="DOUBLE_VALUE"
        jdbc-type="DOUBLE"
        nullable="true"
    >
    </field-descriptor>
    <field-descriptor
        name="textPropertyValue"
        column="TEXT_VALUE"
        jdbc-type="VARCHAR"
        nullable="true"
        length="254"
    >
    </field-descriptor>
    <field-descriptor
        name="creationDate"
        column="CREATION_DATE"
        jdbc-type="TIMESTAMP"
        nullable="false"
    >
    </field-descriptor>
    <field-descriptor
        name="modifiedDate"
        column="MODIFIED_DATE"
        jdbc-type="TIMESTAMP"
        nullable="false"
    >
    </field-descriptor>
    <reference-descriptor
        name="propertyKey"
        class-ref="org.apache.jetspeed.prefs.om.impl.PropertyKeyImpl"
        refresh="true"
        auto-retrieve="true"
        auto-delete="false"
        auto-update="true"
    >
        <documentation>This is the reference to a property key.</documentation>
        <foreignkey field-ref="propertyKeyId"/>
    </reference-descriptor>
</class-descriptor>
