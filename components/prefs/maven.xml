<project default="java:jar"
         xmlns:j="jelly:core" 
         xmlns:define="jelly:define"
         xmlns:reactor="reactor">

  <!-- Target of maven test:single test -->
  <property name='testcase' value='org.apache.jetspeed.prefs.TestPropertyManager'/> 
    
  <goal name="deployJar">
  	<attainGoal name="jar:install"/>

  	<copy file="${basedir}/target/${maven.final.name}.jar" todir="${deploy.war.dir}/jetspeed/WEB-INF/lib"/>
  </goal>
  
  <!-- ================================================================ -->
  <!-- Merge OJB desriptor with Jetspeed main OJB descriptor            -->
  <!-- ================================================================ -->
  <goal name="ojb.registry">
    <copy  file="${basedir}/src/java/repository_prefs.xml" tofile="${basedir}/../../portal/target/classes/repository_prefs.xml"/>
    <copy  file="${basedir}/src/java/repository_prefs.xml" tofile="${basedir}/../../portal/target/test-classes/repository_prefs.xml"/>
   </goal>

  <goal name="deployJar">
  	<attainGoal name="jar:install"/>

  	<copy file="${basedir}/target/${maven.final.name}.jar" todir="${deploy.war.dir}/jetspeed/WEB-INF/lib"/>
  </goal>
  
  <goal name="build.prefs">
  	<attainGoal name="ojb.registry"/>
  	<attainGoal name="jar:install"/>
</goal>

</project>
