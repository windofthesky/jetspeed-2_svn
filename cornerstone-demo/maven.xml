<project default="run-all-demos"
         xmlns:j="jelly:core" 
         xmlns:define="jelly:define"
         xmlns:reactor="reactor">
         
 <preGoal name="demo-1">
 	 <!-- Merge standard runtime and demo into same directory -->
     <copy todir="${maven.build.dir}/runtime">
			<fileset dir="${CORNERSTONE_RUNTIME_HOME}"/>
	  </copy>	  
	  <copy todir="${maven.build.dir}/runtime/registry">
			<fileset dir="${basedir}/registry"/>
	  </copy>
  </preGoal>     
  
   <preGoal name="demo-persistence">
 	 <!-- Merge standard runtime and demo into same directory -->
     <copy todir="${maven.build.dir}/runtime">
			<fileset dir="${CORNERSTONE_RUNTIME_HOME}"/>
	  </copy>	  
	  <copy todir="${maven.build.dir}/runtime/registry">
			<fileset dir="${basedir}/registry"/>
	  </copy>
  </preGoal>           
         
         
 <goal name="run-all-demos">
     <attainGoal name="jar:jar" />
     <attainGoal name="demo-1" />
     <attainGoal name="demo-persistence" />
  </goal>
  
   <goal name="demo-1">
   	  <java classname="org.apache.cornerstone.framework.demo.main.DemoMain" fork="yes">
      <sysproperty key="log4j.configuration" value="log4j.properties"/> 
      <sysproperty key="CORNERSTONE_RUNTIME_HOME" value="${basedir}/target/runtime"/>
       <classpath>
         <path refid="maven.dependency.classpath"/>
         <pathelement path="${maven.build.dir}/${jar.name}"/>
        </classpath>
      </java>
   </goal>
   	
    <goal name="demo-persistence">
    	     <java classname="org.apache.cornerstone.framework.demo.main.DemoPersistence" fork="yes">
      <sysproperty key="log4j.configuration" value="log4j.properties"/> 
      <sysproperty key="CORNERSTONE_RUNTIME_HOME" value="${basedir}/target/runtime"/>
       <classpath>
         <path refid="maven.dependency.classpath"/>
         <pathelement path="${maven.build.dir}/${jar.name}"/>
        </classpath>
      </java>
   	</goal>


  
</project>
