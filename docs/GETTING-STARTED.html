<html>
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
body, body td {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt}
h1 {font-size: 18pt}
h2 {font-size: 16pt}
h3 {font-size: 14pt}
h3 {font-size: 12pt}
strong {color: red;}
code {font-size: 10pt;}
.border-1 {border: solid 1px;}
-->
</style>
</head>

<body bgcolor="#FFFFFF" text="#000000">
<h1>Getting Started with Jetspeed 2</h1>
<p>It is expected that the user is familiar with both the <a href="http://maven.apache.org">Apache 
  Maven</a> project tool and the <a href="http://ant.apache.org">Apache Ant</a> 
  build tool.</p>
<h2>Requirements:</h2>
<ul>
  <li><a href="http://ant.apache.org/bindownload.cgi">Ant 1.5</a> or higher</li>
  <li><a href="http://maven.apache.org/start/download.html">Maven 0.8</a> or higher</li>
  <li>Java 1.3 or higher</li>
  <li>Servlet 2.3:<br>
    Tomcat 4.1.18-LE w/JDK 1.4<br>
    <b>or</b> <br>
    Tomcat 4.1.24 w/ JDK 1.3</li>
</ul>
<h2>1. Get Maven Ready</h2>
<p>If you have not already done so, download and install Maven.</p>
<p><strong>NOTE!</strong>: There are 2 jars required by Jetspeed that are <b>NOT 
  </b>available direct through Maven which you will have to download manually.<br>
</p>
<table width="650" border="1" cellspacing="0" cellpadding="3" style="margin-left: 20px">
  <tr> 
    <th width="34%" >Jar</th>
    <th width="66%" >Instructions</th>
  </tr>
  <tr> 
    <td width="34%" ><a href="http://java.sun.com/products/jdbc/download.html#spec">JDBC 
      Standard Extensions 2.0</a></td>
    <td width="66%" >Once downloaded it needs to be renamed to <code>jdbc-se2.0.jar 
      </code>and copied to your ${MAVEN_REPOSITORY}/jdbc-se/jars directory.</td>
  </tr>
  <tr> 
    <td width="34%"><a href="http://java.sun.com/products/jta/">JTA 1.0.1</a></td>
    <td width="66%">Once downloaded it needs to be renamed to jta1.0.1.jar and 
      copied to your ${MAVEN_REPOSITORY}/jta/jars directory.</td>
  </tr>
  <tr>
    <td width="34%">
      <p>Pluto Container</p>
      <p><strong>NOTE!</strong> as of last writing of this document, the Pluto 
        jar is unavailable to non-committers. This will change as soon as IBM 
        feels Pluto is ready for prime time.</p>
    </td>
    <td width="66%">The pluto jar needs to be named to pluto-0.46.jar and copied 
      to your ${MAVEN_REPOSITORY}/Pluto-container/jars directory.</td>
  </tr>
</table>
<p><strong>NOTE!</strong>: <b>Maven Beta 0.9:</b><br>
  Delete all of these lines from the jar creation section</p>
<pre>
  &lt;j:set var=&quot;extensionList&quot; value=&quot;&quot;/&gt;
  
  &lt;j:forEach var=&quot;artifact&quot; items=&quot;${pom.artifacts}&quot;&gt;
    &lt;j:set var=&quot;dep&quot; value=&quot;${artifact.dependency}&quot;/&gt;
    &lt;j:set var=&quot;extensionList&quot; value=&quot;${extensionList},${dep.artifactId}&quot;/&gt;
  &lt;/j:forEach&gt; 
  
  &lt;j:if test=&quot;${extensionList.length() != 0}&quot;&gt;
    &lt;j:set var=&quot;extensionList&quot; value=&quot;${extensionList.substring(1)}&quot;/&gt;
    &lt;ant:attribute name=&quot;Extension-List&quot; value=&quot;${extensionList}&quot;/&gt;
  &lt;/j:if&gt;

  &lt;j:forEach var=&quot;artifact&quot; items=&quot;${pom.artifacts}&quot;&gt;
    &lt;j:set var=&quot;dep&quot; value=&quot;${artifact.dependency}&quot;/&gt;
    &lt;ant:attribute name=&quot;${dep.artifactId}-Extension-Name&quot; value=&quot;${dep.artifactId}&quot;/&gt;
    &lt;ant:attribute name=&quot;${dep.artifactId}-Implementation-Version&quot; value=&quot;${dep.version}&quot;/&gt;
    &lt;ant:attribute name=&quot;${dep.artifactId}-Implementation-URL&quot; value=&quot;http://www.ibiblio.org/maven${artifact.urlPath}&quot;/&gt;
  &lt;/j:forEach&gt; 
</pre>
<p><strong>NOTE!</strong>: <b>Maven Beta 0.9 and greater:</b> </p>
<p>In ${jetspeed-2-home}/portal:<br>
</p>
<ol>
  <li> Rename the existing <code>maven.xml </code>file to <code>maven-0.8.xml</code></li>
  <li>Rename <code>maven-0.9-and-up.xml </code>to <code>maven.xml</code></li>
</ol>
<h2>2. build.properties settings:</h2>
<p>Please set these values in you <code>build.properties</code> file:</p>
<table width="650" border="1" cellspacing="0" cellpadding="3">
  <tr> 
    <th width="134">property</th>
    <th width="229">example</th>
    <th width="261">what is it?</th>
  </tr>
  <tr> 
    <td width="134">catalina.shared.lib</td>
    <td width="229">${CATALINA_HOME}/shared/lib/</td>
    <td width="261">The location of the jars in your Tomcat installation.</td>
  </tr>
  <tr>
    <td width="134">deploy.war.dir</td>
    <td width="229">${CATALINA_BASE}/webapps/</td>
    <td width="261">The location to deploy web application in Tomcat.</td>
  </tr>
  <tr> 
    <td width="134">deployment.db.alias</td>
    <td width="229">${CATALINA_BASE}/webapps/jetspeed/WEB-INF/db/hsql/Registry</td>
    <td width="261">The location of HypersonicSQL database file that will contain 
      Jetspeed information like registries and user info.</td>
  </tr>
</table>
<h2><br>
  3. Changes to Tomcat's server.xml</h2>
<p>Edit ${CATALINA_BASE}/conf/server.xml, add this line:<br>
  (this only needs to be done once)</p>
<p> <code>&lt;Context path=&quot;/jetspeed&quot; docBase=&quot;jetspeed&quot; 
  crossContext=&quot;true&quot;/&gt;</code></p>
<p>This will allow the jetspeed app to load your deployed portlet applications.</p>
<h2>4. Build .jar and .war files</h2>
<p>There are two procedures you can follow that will yeild the same results which 
  are to build and install the required jetspeed jars into Maven (for build purposes).</p>
<table width="650" border="1" cellspacing="0" cellpadding="3" valign="top">
  <tr> 
    <th>procedure 1 (short and sweet)</th>
    <th>procedure 2 (long and boring)</th>
  </tr>
  <tr> 
    <td rowspan="6" valign="top"> 
      <p><b>Build all jars and wars:</b><br>
        cd ${jetspeed-2-home}<br>
        maven allBuild</p>
    </td>
    <td><b>Build Portlet-API</b><br>
      cd ${jetspeed-2-home}/portlet-api<br>
      maven jar:install</td>
  </tr>
  <tr> 
    <td><b>Build Jetspeed Commons</b><br>
      cd ${jetspeed-2-home}/commons<br>
      maven jar:install</td>
  </tr>
  <tr> 
    <td><b>Build Container</b><br>
      cd ${jetspeed-2-home}/container<br>
      maven jar:install</td>
  </tr>
  <tr> 
    <td> <b>Build the demo web application </b><br>
      cd ${jetspeed-2-home}/applications/demo<br>
      maven war</td>
  </tr>
  <tr>
    <td><b>Build Jetspeed Portal</b><br>
      cd ${jetspeed-2-home}/portal<br>
      maven war</td>
  </tr>
  <tr> 
    <td><b>Install into Catalina Shared</b><br>
      cd ${jetspeed-2-home}<br>
      maven catalina:base-shared<br>
      maven catalina:shared</td>
  </tr>
</table>
<h2><br>
  5. Deploying Jetspeed 2</h2>
<p><b>Deploy Jetspeed Portal WAR into Catalina</b></p>
<ol>
  <li>cd ${jetspeed-2-home}/portal</li>
  <li>maven deploy</li>
</ol>
<p>This will unpack the newly created jetspeed.war file into Tomcat/Catalina</p>
<h2>6. Deploying the demo application</h2>
<p><b>Install the demo web application into Catalina</b></p>
<ol>
  <li>cd ${jetspeed-2-home}/portal</li>
  <li>maven pam.deploy </li>
</ol>
<h2>7. Start Tomcat</h2>
<p>Run Tomcat, go to Jetspeed</p>
<h2>(Optional) How to undeploy the demo application</h2>
<p><b>To undeploy the demo app</b></p>
<ol>
  <li>cd ${jetspeed-2-home}/portal</li>
  <li>maven pam.undeploy </li>
</ol>
<h2>Addendum</h2>
<p>Some users have experienced a problem where the portlet-container jar isn't 
  the latest one copied into the HW_APP webapp<br>
  this causes HelloPortlet to not display any info<br>
  Its easily fixed by manually copying <br>
  ${MAVEN_REPOSITORY}/jetspeed2/jars/jetspeed-container-2.0-a1-dev.jar ${catalina.home}/webapps/HW_APP/WEB-INF/lib/</p>
</body>
</html>
