<?xml version="1.0"?>
<!--
Copyright 2004 The Apache Software Foundation

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<document>
  <properties>
    <title>Jetspeed 2 Home Page</title>
    <subtitle>Welcome to Jetspeed 2</subtitle>
    <authors>
      <person name="David Sean Taylor" email="taylor@apache.org"/>
    </authors>
  </properties>
  <body>
<section name="Default Database">
<p>
The default database distributed with Jetspeed-2 is the Hypersonic SQL Java Database (HSQL).
HSQL runs in process with Jetspeed-2. It is not a production-ready database, however it allows you 
to get up and running quickly. To move on to a more robust database, follow the instructions in the
next section.
</p>
</section>
<section name="MySQL">
<p>
To run with My SQL, add the following properties to your $HOME/build.properties:
</p>
<source test=""><![CDATA[

# -------------------------------------------------------------------------
# configure MySQL Test DB
# -------------------------------------------------------------------------
org.apache.jetspeed.test.database.default.name=mysql
org.apache.jetspeed.test.database.url = jdbc:mysql://j2-server/j2test
org.apache.jetspeed.test.database.driver = com.mysql.jdbc.Driver
org.apache.jetspeed.test.database.user = jetspeed2
org.apache.jetspeed.test.database.password = whatever
# -------------------------------------------------------------------------
# configure MySQL Production DB
# -------------------------------------------------------------------------
org.apache.jetspeed.production.database.default.name=mysql
org.apache.jetspeed.production.database.url = jdbc:mysql://j2-server/j2
org.apache.jetspeed.production.database.driver = com.mysql.jdbc.Driver
org.apache.jetspeed.production.database.user = jetspeed2
org.apache.jetspeed.production.database.password = whatever
# -------------------------------------------------------------------------

]]></source>
<p>
In the example above, you will need to have a MySQL server running on a host named 'j2-server'.
Also, you will need 2 databases, one called 'j2test' for running the unit tests,
and a second called 'j2' for the production database.
A user named 'jetspeed2' should be granted access to both the 'j2' and 'j2test' databases.
</p>

<subsection name ='Known Issues'>
<p>
The script 'populate-entities-for-default-psml.sql', fails to execute.
It will fail out, since My SQL doesn't support the SQL syntax in the statements there.
Until we get a solution for this, try running the populate-entities-for-default-psml-mysql.sql from My SQL directly.
<b>NOTE:</b> this script may fail, check your foreign keys values referencing the portlet definition table.
I hope to get this resolved soon.
</p>
</subsection>

</section>

<section name="Oracle">
<p>
To run with Oracle, add the following properties to your $HOME/build.properties:
</p>

<source test=""><![CDATA[

# -------------------------------------------------------------------------
# configure Oracle Test DB
# -------------------------------------------------------------------------
# org.apache.jetspeed.test.database.default.name=oracle
# org.apache.jetspeed.test.database.ojb.platform=oracle9i
# org.apache.jetspeed.test.database.url = jdbc:oracle:thin:@j2-sever:1521:j2db
# org.apache.jetspeed.test.database.driver = oracle.jdbc.driver.OracleDriver
# org.apache.jetspeed.test.database.user = j2test
# org.apache.jetspeed.test.database.password = whatever
# -------------------------------------------------------------------------
# configure Oracle Production DB
# -------------------------------------------------------------------------
# org.apache.jetspeed.production.database.default.name=oracle
# org.apache.jetspeed.production.database.ojb.platform=oracle9i
# org.apache.jetspeed.production.database.url = jdbc:oracle:thin:@j2-server:1521:j2db
# org.apache.jetspeed.production.database.driver = oracle.jdbc.driver.OracleDriver
# org.apache.jetspeed.production.database.user = j2
# org.apache.jetspeed.production.database.password = whatever
# -------------------------------------------------------------------------

]]></source>
<p>
In the example above, you will need to have a Oracle server running on a host named 'j2-server'
and have an Oracle database SID named 'j2db' installed on that server.
Also, you will need 2 database users (schemas), one called 'j2test' for running the unit tests,
and a second called 'j2' for the production database.
</p>

<subsection name ='Known Issues'>
<p>
Only for the first time you create the database for Oracle, there is an issue with the drop statements.
To get around this problem, set your properties as above in your $HOME/build.properties, and then 
run these commands:
</p>
<source test=""><![CDATA[

maven db.scripts.gen
maven dropdrops

]]></source>
</subsection>

</section>
  </body>
</document>
