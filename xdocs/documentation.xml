<?xml version="1.0"?>
<!--
    Copyright 2004 The Apache Software Foundation
    
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
    
    http://www.apache.org/licenses/LICENSE-2.0
    
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<document>
    <properties>
        <title>Documentation for Jetspeed 2</title>
        <subtitle>Documentation Guideline</subtitle>
        <authors>
            <person name="David Le Strat" email="dlestrat@apache.org" />
            <person name="Ate Douma" email="ate@apache.org" />
        </authors>
    </properties>
    <body>
        <section name="Documentation Process Overview">
            <p>
            Documentation is critical to make Jetspeed's adoption as smooth as possible.  Jetspeed documentation
            process can be found 
            <a href="http://wiki.apache.org/portals/Jetspeed2/DocumenationProcessWebsite">on Jetspeed&apos;s Wiki</a>.  
            Please submit documentation patches, or contribute to the Wiki.
            </p>
        </section>
        <section name="Generating full Site Documentation">
        <p>
          To generate the full site documentation for Jetspeed run the following maven command:
        </p>
        <source>
          <![CDATA[
maven allSite]]>
          </source>
        <p>
        Note: make sure Jetspeed builds without problems as this goal will take quite some time.
        </p>
        <p>
        To speed up this goal, I recommend running it without an internet connection (link checks can take very long)
        and with maven.mode.online=false (or use -o on the commandline).
        </p>  
        </section>
        <section name="Generating PDF Documentation">
            <subsection name="Installing Maven PDF Plugin">
                <p>If you are using Maven 1.0 or above, to automatically install the plugin, type the following on a single line:</p>
                <source>
                    <![CDATA[
maven plugin:download -DgroupId=maven -DartifactId=maven-pdf-plugin
	  -Dversion=2.3]]>
                </source>
                <p>
                    Once, the plugin is install copy xalan.jar to the ${MAVEN_HOME}/lib/endorsed. When build Jetspeed, Xalan is download as a dependency. You
                    can copy the Jetspeed version of Xalan from
                    <code>${REPO_HOME}/xalan/jars</code>
                    .
                </p>
                <p>
                    More information on the PDF plugin can be found
                    <a href="http://maven.apache.org/reference/plugins/pdf/">on the Maven PDF plugin site</a>
                    .
                </p>
            </subsection>
            <subsection name="Generating the PDF documentation">
                <p>To create the PDF documentation for a specific component, go to the component root directory and run:</p>
                <source>
                    <![CDATA[
maven pdf]]>
                </source>
            </subsection>
        </section>
        <section name="Updating the website">
          <p>
          Once you generated a new version of the site documentation, you can bring it online as follows:
          </p>
          <ul>
            <li>(tar.g)zip the contents of ${JETSPEED_2_HOME}/target/docs</li>  
            <li>upload the resulting archive on people.apache.org</li>  
            <li>extract the archive in /www/portals.apache.org/jetspeed-2</li>              
          </ul>
          <p>
          More information can be found at: <a href="http://www.apache.org/dev/committers.html#web">Committers' FAQ</a>
          </p>
          <p>
          Note: the above link points at information assuming the site itself is under svn. For Jetspeed-2 this 
          isn't (yet) the case.          
          </p>
        </section>
    </body>
</document>