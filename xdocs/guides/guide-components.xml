<?xml version="1.0"?>
<!--
	Copyright 2004 The Apache Software Foundation
	
	Licensed under the Apache License, Version 2.0 (the "License");
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at
	
	http://www.apache.org/licenses/LICENSE-2.0
	
	Unless required by applicable law or agreed to in writing, software
	distributed under the License is distributed on an "AS IS" BASIS,
	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	See the License for the specific language governing permissions and
	limitations under the License.
-->
<document>
	<properties>
		<title>Guide to Jetspeed-2 Component Architecture</title>
		<subtitle>Guide to Jetspeed-2 Component Architecture</subtitle>
		<authors>
			<person name="David Le Strat" email="dlestrat@apache.org" />
		</authors>
	</properties>
	<body>
		<section name="Guide to Jetspeed-2 Component Architecture">
		<p>
		The Jetspeed-2 architecture is build on a component architecture where as defined by 
	    <a href="http://www.martinfowler.com/articles/injection.html">Martin Fowler</a>:
		<pre>
    By the term component, I mean a glob of software that's intended to be used, 
    without change, by application that is out of the control of the writers of 
    the component. By 'without change' I mean that the using application doesn't 
    change the source code of the components, although they may alter the component's 
    behavior by extending it in ways allowed by the component writers.</pre>
		</p>
		<p>
		Jetspeed-2 uses dependency injection as a programming design pattern and architectural model 
		to establish a level of abstraction via a public interface, and to remove dependency on the components' implementation.
		The architecture unites the components rather than the components linking themselves or being linked together.
		Dependency injection is a pattern in which responsibility for object creation and object linking is removed 
		from the objects themselves and transferred to a factory.
		Dependency injection therefore is obviously inverting the control for object creation and linking, 
		and can be seen to be a form of Inversion of Controls(IoC).
		</p>
		<subsection name="Jetspeed-2 and Component Frameworks">
		<p>
		Jetspeed-2 leverages the <a href="http://www.springframework.org">Spring Framework</a> as its default component framework.
		However, Jetspeed-2 provides an architecture in which the component framework can easily be replaced by alternative
		component frameworks such as <a href="http://www.picocontainer.org/">Pico</a>.
		</p>
		<p>
		Jetspeed-2 component framework assembly is configured and implemented in <i>JetspeedServlet</i>:<br/><br/>
		<img src="images/jetspeedservlet-c.gif" border="0"/>
		</p>
		<p>
		The <code>JetspeedServlet</code> is configured in the portal application <i>web.xml</i> to load at startup.  The <code>initializeComponentManager</code>
		method loads the <a href="guide-portal-assembly.html">assembly</a> for the given component framework.  The default implementation
		of <code>initializeComponentManager</code> supports the <a href="http://www.springframework.com">spring framework</a> as a component framework
		and assembles the xml files located under <code>WEB-INF/assembly</code> to initialize the spring engine.  The <i>JetspeedEngine</i> is then
		constructed with the proper component manager.
		<pre>
    engine = new JetspeedEngine(properties, applicationRoot, config,
                                initializeComponentManager(config, applicationRoot, properties));
		</pre>
		</p>
		<p>
		In order to support another component framework, developers should override the <code>initializeComponentManager</code> implementation.
		</p>
		</subsection>
		<subsection name="Jetspeed-2 Core Components">
		<table>
          <tr>
          	<th colspan="2">Jetspeed-2 Component Manager - Artifact Id: jetspeed-cm</th>
          </tr>
          <tr>
            <th>Component Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-cm/index.html"><code>ComponentManager</code></a></td>
            <td>The <code>ComponentManager</code> provides a generic layer of abstraction on top of the component framework
            being used.  The default <code>ComponentManager</code> implementation in Jetspeed-2 is the 
            <code>SpringComponentManager</code>.  More information can be found in the 
            <a href="../multiproject/jetspeed-cm/index.html"><code>ComponentManager</code> documentation</a>.</td>
          </tr>
		</table>
		</subsection>
		</section>
	</body>
</document>