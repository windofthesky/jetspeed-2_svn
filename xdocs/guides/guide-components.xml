<?xml version="1.0"?>
<!--
	Copyright 2004 The Apache Software Foundation
	
	Licensed under the Apache License, Version 2.0 (the "License");
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at
	
	http://www.apache.org/licenses/LICENSE-2.0
	
	Unless required by applicable law or agreed to in writing, software
	distributed under the License is distributed on an "AS IS" BASIS,
	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	See the License for the specific language governing permissions and
	limitations under the License.
-->
<document>
	<properties>
		<title>Guide to Jetspeed-2 Component Architecture</title>
		<subtitle>Guide to Jetspeed-2 Component Architecture</subtitle>
		<authors>
			<person name="David Le Strat" email="dlestrat@apache.org" />
		</authors>
	</properties>
	<body>
		<section name="Guide to Jetspeed-2 Component Architecture">
		<p>
		The Jetspeed-2 architecture is build on a component architecture where as defined by 
	    <a href="http://www.martinfowler.com/articles/injection.html">Martin Fowler</a>:
		<pre>
    By the term component, I mean a glob of software that's intended to be used, 
    without change, by application that is out of the control of the writers of 
    the component. By 'without change' I mean that the using application doesn't 
    change the source code of the components, although they may alter the component's 
    behavior by extending it in ways allowed by the component writers.</pre>
		</p>
		<p>
		Jetspeed-2 uses dependency injection as a programming design pattern and architectural model 
		to establish a level of abstraction via a public interface, and to remove dependency on the components' implementation.
		The architecture unites the components rather than the components linking themselves or being linked together.
		Dependency injection is a pattern in which responsibility for object creation and object linking is removed 
		from the objects themselves and transferred to a factory.
		Dependency injection therefore is obviously inverting the control for object creation and linking, 
		and can be seen to be a form of Inversion of Controls(IoC).
		</p>
		<subsection name="Jetspeed-2 and Component Frameworks">
		<p>
		Jetspeed-2 leverages the <a href="http://www.springframework.org">Spring Framework</a> as its default component framework.
		However, Jetspeed-2 provides an architecture in which the component framework can easily be replaced by alternative
		component frameworks such as <a href="http://www.picocontainer.org/">Pico</a>.
		</p>
		<p>
		Jetspeed-2 component framework assembly is configured and implemented in <i>JetspeedServlet</i>:<br/><br/>
		<img src="images/jetspeedservlet-c.gif" border="0"/>
		</p>
		<p>
		The <code>JetspeedServlet</code> is configured in the portal application <i>web.xml</i> to load at startup.  The <code>initializeComponentManager</code>
		method loads the <a href="guide-portal-assembly.html">assembly</a> for the given component framework.  The default implementation
		of <code>initializeComponentManager</code> supports the <a href="http://www.springframework.com">spring framework</a> as a component framework
		and assembles the xml files located under <code>WEB-INF/assembly</code> to initialize the spring engine.  The <i>JetspeedEngine</i> is then
		constructed with the proper component manager.
		<source>
  engine = new JetspeedEngine(properties, applicationRoot, config,
      initializeComponentManager(config, applicationRoot, properties));
		</source>
		</p>
		<p>
		In order to support another component framework, developers should override the <code>initializeComponentManager</code> implementation.
		</p>
		</subsection>
		<subsection name="Jetspeed-2 Core Components">
		<table>
          <tr>
          	<th colspan="2">Jetspeed-2 Capabilities - Artifact Id: jetspeed-capability</th>
          </tr>
          <tr>
            <th>Component Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-capability/index.html"><code>Capabilities</code></a></td>
            <td>The <code>Capabilities</code> components maps clients to supported mime types and media types.
            It creates a <code>CapabilityMap</code> that is used through the portal engine to render the
            portal content for the targetted client.</td>
          </tr>
		</table><br/>
		<table>
          <tr>
          	<th colspan="2">Jetspeed-2 Component Manager - Artifact Id: jetspeed-cm</th>
          </tr>
          <tr>
            <th>Component Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-cm/index.html"><code>ComponentManager</code></a></td>
            <td>The <code>ComponentManager</code> provides a generic layer of abstraction on top of the component framework
            being used.  The default <code>ComponentManager</code> implementation in Jetspeed-2 is the 
            <code>SpringComponentManager</code>.  More information can be found in the 
            <a href="../multiproject/jetspeed-cm/index.html"><code>ComponentManager</code> documentation</a>.</td>
          </tr>
		</table><br/>
		<table>
          <tr>
          	<th colspan="2">Jetspeed-2 Deploy Tools - Artifact Id: jetspeed-deploy-tools</th>
          </tr>
          <tr>
            <th>Component Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-deploy-tools/deploy-tools.html"><code>JetspeedDeploy</code></a></td>
            <td><code>JetspeedDeploy</code> prepares portlet applications prior to being deployed in Jetspeed-2.  More information can be found in the 
            <a href="../multiproject/jetspeed-deploy-tools/deploy-tools.html"><code>JetspeedDeploy</code> documentation</a>.</td>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-deploy-tools/index.html"><code>DeploymentManager</code></a></td>
            <td>The <code>DeploymentManager</code> listens for new portal assets (portlets, decorators) to be deployed.  An overview of how deployment
            works in Jetspeed-2 can be found <a href="../multiproject/jetspeed-deploy-tools/index.html">here</a>.</td>
          </tr>
		</table><br/>
		<table>
          <tr>
          	<th colspan="2">Jetspeed-2 Preferences - Artifact Id: jetspeed-prefs</th>
          </tr>
          <tr>
            <th>Component Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-prefs/index.html"><code>PreferencesProvider</code></a></td>
            <td>The <code>PreferencesProvider</code> exposes Jetspeed-2 implementation of the <code>java.util.Preferences</code> API.</td>
          </tr>
		</table><br/>
		<table>
          <tr>
          	<th colspan="2">Jetspeed-2 RDBMS - Artifact Id: jetspeed-rdbms</th>
          </tr>
          <tr>
            <th>Component Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-rdbms/index.html"><code>ConnectionRepositoryEntry</code></a></td>
            <td>The <code>ConnectionRepositoryEntry</code> exposes Jetspeed-2 implementation of the <code>java.util.Preferences</code> API.</td>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-rdbms/dao.html"><code>InitablePersistenceBrokerDaoSupport</code></a></td>
            <td><code>InitablePersistenceBrokerDaoSupport</code> provides data access and persistence support for Jetspeed-2.</td>
          </tr>
		</table><br/>
		<table>
          <tr>
          	<th colspan="2">Jetspeed-2 Security - Artifact Id: jetspeed-security</th>
          </tr>
          <tr>
            <th>Component Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-security/arch.html"><code>DefaultLoginModule</code></a><br/>
            <a href="../multiproject/jetspeed-security/arch.html"><code>RdbmsPolicy</code></a><br/></td>
            <td>Jetspeed-2 default implementation for <a href="http://java.sun.com/products/jaas/">JAAS services</a>.  Jetspeed-2 leverages JAAS as 
            a generic security standard framework to expose security functionality to the portal engine.  The JAAS services
            leverage Jetspeed-2 coarsed grained services for which specific implementations are provided through Jetpseed-2 security SPI.</td>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-security/arch.html"><code>UserManager</code></a><br/>
            <a href="../multiproject/jetspeed-security/arch.html"><code>RoleManager</code></a><br/>
            <a href="../multiproject/jetspeed-security/arch.html"><code>GroupManager</code></a><br/>
            <a href="../multiproject/jetspeed-security/arch.html"><code>PermissionManager</code></a></td>
            <td>Coarsed grained security components exposing Jetspeed-2 security management APIs.</td>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-security/arch.html"><code>UserSecurityHandler</code></a><br/>
            <a href="../multiproject/jetspeed-security/arch.html"><code>CredentialHandler</code></a><br/>
            <a href="../multiproject/jetspeed-security/arch.html"><code>GroupSecurityHandler</code></a><br/>
            <a href="../multiproject/jetspeed-security/arch.html"><code>RoleSecurityHandler</code></a><br/>
            <a href="../multiproject/jetspeed-security/arch.html"><code>SecurityMappingHandler</code></a></td>
            <td>Fined grained Jetspeed-2 security SPI components exposing a specific implementation to the Jetspeed-2
            security engine.  This mechanism provides a flexible framework for supporting multiple security implementation
            without having to impact the higher level security services.</td>
          </tr>
		</table><br/>
		<table>
          <tr>
          	<th colspan="2">Jetspeed-2 Search - Artifact Id: jetspeed-search</th>
          </tr>
          <tr>
            <th>Component Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-search/index.html"><code>SearchEngine</code></a></td>
            <td><code>SearchEngine</code> provides the integration with the <a href="http://lucene.apache.org/">Apache Lucene</a> search
            engine.</td>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-search/index.html"><code>HandlerFactory</code></a></td>
            <td>The <code>HandlerFactory</code> exposes the documents handlers to the <code>SearchEngine</code>.</td>
          </tr>
		</table><br/>
		<table>
          <tr>
          	<th colspan="2">Jetspeed-2 Statistics - Artifact Id: jetspeed-statistics</th>
          </tr>
          <tr>
            <th>Component Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-statistics/index.html"><code>PortalStatistics</code></a></td>
            <td><code>PortalStatistics</code> exposes the Jetspeed-2 data collection API for data collection and data
            retrieval.</td>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-statistics/index.html"><code>BatchedStatistics</code></a></td>
            <td><code>BatchedStatistics</code> is responsible for the batch collection of statistics data given
            a time to flush period.</td>
          </tr>
          <tr>
            <td><a href="../multiproject/jetspeed-statistics/aggregation.html"><code>AggregateStatistics</code></a><br/>
            <a href="../multiproject/jetspeed-statistics/aggregation.html"><code>StatisticsQueryCriteria</code></a></td>
            <td><code>AggregateStatistics</code> interacts with the <code>PortalStatistics</code> component to provide
            aggregate portal data for a specific event and search criteria provided by <code>StatisticsQueryCriteria</code>.</td>
          </tr>   
		</table>
		</subsection>
		</section>
	</body>
</document>