<?xml version="1.0"?>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at
    
    http://www.apache.org/licenses/LICENSE-2.0
    
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<document>
    <properties>
        <title>Jetspeed 2 Services</title>
        <subtitle>Guide to Jetspeed Services</subtitle>
        <authors>
            <person name="David Sean Taylor" email="taylor@apache.org" />
        </authors>
    </properties>
    <body>
        <section name="Services">
            <p>
				Jetspeed provides a way for portlets to access Jetspeed components,
				or services, from a portlet. Although this is a Jetspeed-specific
				feature, it is how Jetspeed Administrative portlets can work with
				customizing Jetspeed. For example, the Group Administration
				portlet below uses a Jetspeed service to manipulate Jetspeed groups.
			</p>
			<p>
				All services must be exported by Jetspeed in the Spring configuration <strong><code>jetspeed-services.xml</code></strong> file. 
				All services required by a portlet must be
				specified in the <strong><code>jetspeed-portlet.xml</code></strong>.	 
            </p>
            <p>
				Portlet applications requiring a jetspeed service 
				refer to that service in their <strong><code>jetspeed-portlet.xml</code></strong> deployment descriptor:
<source><![CDATA[
<js:services>
	<js:service name='ApplicationServerManager'/>
	<js:service name='PageManager'/>
	<js:service name='PermissionManager'/>
	<js:service name='PortalAdministration'/>
	<js:service name='UserManager'/>
</js:services>
]]></source>
			</p>
			<p>
				Applications can get the service in the portlet init phase, for example:
<source><![CDATA[
groupManager = (GroupManager)
getPortletContext().getAttribute(CommonPortletServices.CPS_GROUP_MANAGER_COMPONENT);
]]></source>
			</p>            
			<p>
				<table>
					<tr>
						<th colspan="2">Key Jetspeed Services defined in Spring (see jetspeed-services.xml for full list)</th>
					</tr>				
					<tr>
						<th>Entry Key</th>
						<th>Ref Bean</th>
					</tr>				
					<tr>
						<td>PortletRegistryComponent</td>
						<td>org.apache.jetspeed.components.portletregistry.PortletRegistry</td>
					</tr>
					<tr>
						<td>SearchComponent</td>
						<td>org.apache.jetspeed.search.SearchEngine</td>
					</tr>
					<tr>
						<td>PAM</td>
						<td>PAM</td>
					</tr>
					<tr>					
						<td>UserManager</td>
						<td>org.apache.jetspeed.security.UserManager</td>
					</tr>
					<tr>					
						<td>PageManager</td>
						<td>org.apache.jetspeed.page.PageManager</td>
					</tr>
					<tr>					
						<td>RoleManager</td>
						<td>org.apache.jetspeed.security.RoleManager</td>
					</tr>
					<tr>					
						<td>GroupManager</td>
						<td>org.apache.jetspeed.security.GroupManager</td>
					</tr>
					<tr>					
						<td>Profiler</td>
						<td>org.apache.jetspeed.profiler.Profiler</td>
					</tr>
					<tr>					
						<td>SSO</td>
						<td>org.apache.jetspeed.sso.SSOProvider</td>
					</tr>
					<tr>
						<td>EntityAccessor</td>
						<td>org.apache.jetspeed.components.portletentity.PortletEntityAccessComponent</td>
					</tr>
					<tr>					
						<td>WindowAccessor</td>
						<td>org.apache.jetspeed.container.window.PortletWindowAccessor</td>
					</tr>
					<tr>					
						<td>ApplicationServerManager</td>
						<td>org.apache.jetspeed.tools.pamanager.servletcontainer.ApplicationServerManager</td>
					</tr>
					<tr>					
						<td>PortletFactory</td>
						<td>portletFactory</td>
					</tr>
					<tr>					
						<td>DeploymentManager</td>
						<td>deploymentManager</td>
					</tr>
					<tr>					
						<td>IdGenerator</td>
						<td>IdGenerator</td>
					</tr>
					<tr>					
						<td>Powertools</td>
						<td>Powertools</td>
					</tr>
					<tr>					
						<td>HeaderResource</td>
						<td>org.apache.jetspeed.headerresource.HeaderResourceFactory</td>
					</tr>
					<tr>					
						<td>TemplateLocator</td>
						<td>TemplateLocator</td>
					</tr>
					<tr>					
						<td>DecorationLocator</td>
						<td>DecorationLocator</td>
					</tr>
					<tr>					
						<td>DecorationFactory</td>
						<td>DecorationFactory</td>
					</tr>
					<tr>					
						<td>Desktop</td>
						<td>JetspeedDesktop</td>
					</tr>
					<tr>					
						<td>PermissionManager</td>
						<td>org.apache.jetspeed.security.PermissionManager</td>
					</tr>
					<tr>					
						<td>PortalStatistics</td>
						<td>PortalStatistics</td>
					</tr>
					<tr>					
						<td>PortalAdministration</td>
						<td>PortalAdministration</td>
					</tr>
					<tr>					
						<td>PreferencesProvider</td>
						<td>org.apache.jetspeed.prefs.PreferencesProvider</td>
					</tr>
					<tr>					
						<td>org.apache.jetspeed.container.session.PortalSessionsManager</td>
						<td>org.apache.jetspeed.container.session.PortalSessionsManager</td>
					</tr>
					<tr>					
						<td>SecurityAccessController</td>
						<td>org.apache.jetspeed.security.SecurityAccessController</td>
					</tr>
					<tr>					
						<td>PortletTrackingManager</td>
						<td>org.apache.jetspeed.aggregator.PortletTrackingManager</td>
					</tr>
					<tr>					
						<td>PortalAuthenticationConfiguration</td>
						<td>org.apache.jetspeed.administration.PortalAuthenticationConfiguration</td>
					</tr>
					<tr>					
						<td>PortalConfiguration</td>
						<td>PortalConfiguration</td>
					</tr>
					<tr>					
						<td>ImporterManager</td>
						<td>importerCastorPageManager</td>
					</tr>
					<tr>					
						<td>decorationContentCache</td>
						<td>decorationContentCache</td>
					</tr>
					<tr>					
						<td>portletContentCache</td>
						<td>portletContentCache</td>
					</tr>
					<tr>					
						<td>AuditActivity</td>
						<td>org.apache.jetspeed.audit.AuditActivity</td>
					</tr>
					<tr>					
						<td>JetspeedSerializerFactory</td>
						<td>org.apache.jetspeed.serializer.JetspeedSerializerFactory</td>
					</tr>
					<tr>					
						<td>PasswordEncodingService</td>
						<td>org.apache.jetspeed.security.PasswordEncodingService</td>
					</tr>
				</table>				
			</p>
        </section>
    </body>
</document>