<?xml version="1.0"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
  
  http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<document>
    <properties>
        <title>Jetspeed 2 Security - Credentials Management</title>
        <authors>
            <person name="David Le Strat" email="dlestrat@apache.org" />
            <person name="Ate Douma" email="ate@douma.nu" />
        </authors>
    </properties>
    <body>
	<section name="Credentials Administration">
            <subsection name="Managing Password Expiration">
              <p>
              If the <code>PasswordExpirationInterceptor</code> is used, password expiration for a certain user can be
              directly managed through the <code>UserDetailPortlet</code> provided with the <code>security</code>
              portlet application.</p>
              <p>
              If enabled, this portlet can display the current expiration date of a password and also allows to change
              its value:</p>
              <p align="center">
                <img src="images/password-expiration.jpg" border="0"/>
              </p>              
              <p>
              As you can see, through the radio group, the password expiration date can be changed to:</p>
              <table>
                <tr><th>Action</th><th>Expires</th></tr>
                <tr><td>Expired</td><td>today</td></tr>
                <tr>
                  <td>Extend</td>
                  <td>today + <code>maxLifeSpanInDays</code> as configured for the PasswordExpirationInterceptor</td>
                </tr>
                <tr><td>Extend Unlimited</td><td>January 1, 8099 (the maximum value allowed for java.sql.Date)</td></tr>
              </table>
              <p>
              This feature can be enabled through the edit/preferences page of the <code>UserDetailsPortlet</code>:</p>
              <p align="center">
                <img src="images/user-detail-prefs.jpg" border="0"/>
              </p>
              <p>
              Note: when a new password value is specified selected password expiration action <code>Expired</code>
              will be ignored!</p>
            </subsection>
            <subsection name="Setting default 'Change Password required on First Login'">
              <p>
              Through the same <code>UserDetailsPortlet</code> preferences as show above, the default
              <code>updateRequired</code> property of a password credential for a new user can be configured too.</p>
              <p>
              And, if you always need the same setting for all users, you can even suppress the selection box normally 
              displayed on the <code>Add User</code> dialog.</p>
              <p>
              With the preferences set as in the example shown above, the <code>Add User</code> dialog will look like this:</p>
              <p align="center">
                <img src="images/add-user.jpg" border="0"/>
              </p>
              <p>
              A user added with the example preferences set, will have the <code>updateRequired</code> property set to
              true, the <code>User</code> role assigned and use the <code>role-fallback</code> profiling rule.</p>
            </subsection> 
        </section>
    </body>
</document>
