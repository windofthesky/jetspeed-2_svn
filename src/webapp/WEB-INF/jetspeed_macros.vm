#*
 * Use this macro at the top of all of your layout decorations so as 
 * to provide required context objects.
*#
#macro (defineLayoutObjects)
  #set($preferedLocale = $JS2RequestContext.locale)
  #set($rootFragment = $jetspeed.currentFragment)
  #set($site = $request.getAttribute("org.apache.jetspeed.portalsite.PortalSiteRequestContext"))
  #set($theme = $request.getAttribute("org.apache.jetspeed.theme"))
  #set($layoutDecoration = $theme.getDecoration($rootFragment))
#end

#* Adds javascript for PortletSelector on HTML *#
#macro (includeJavaScriptForHead)
 <script type="text/javascript"><!--
    function openWindow(pipeline)
    {	
      var vWinUsers = window.open(pipeline, 'PortletSelector', 'status=no,resizable=yes,width=500,height=600,scrollbars=yes');
      vWinUsers.opener = self;
	  vWinUsers.focus();
    }
 //--></script>
#end

#*
 * Returns the full URL for the base of this site.  This
 * can and should be used in the <base href="" /> the <HEAD></HEAD>
 * of your decoration.
*#

#macro(BaseHref)${request.scheme}://${request.serverName}:${request.serverPort}${request.contextPath}/#end

#*
 * Returns the correct Content-type string for use within the Content-type
 * meta tag.
*#	
#macro (ContentType)text/html#if($response.characterEncoding); charset=$response.characterEncoding#end#end

#*
 * Returns the page title string for the current page
 *
*# 
#macro (PageTitle)$jetspeed.page.getTitle($preferedLocale)#end

#*
 * Returns the site description string for use within the
 * <meta name="description" /> meta tag
 *#
#macro (PageDescription)$jetspeed.page.getTitle($preferedLocale)#end

#*
 * Returns the site version string for use within the
 * <meta name="version" /> meta tag
 *#
#macro (SiteVersionTag)$$Id$$ #end	
	
#**
* Includes all of the stylesheets for this Page's theme.
*#
#macro (IncludeStylesheets)
 #foreach($style in $theme.styleSheets)		
	
	<link rel="stylesheet" type="text/css" media="screen, projection" href="$style"  />
 #end
#end

#*
* Returns the base CSS class to use in top level tags
*#
#macro (BaseCSSClass $_decoration)${_decoration.baseCSSClass}#end

#macro (PageBaseCSSClass)#BaseCSSClass($layoutDecoration)#end

#**
 * Returns the fully-qualified path the specified resources using
 * $decorator
 *#	
#macro (GetResource $_decorator $_path)$!{_decorator.getResource($_path)}#end

#**
 * Returns the fully-qualified path the specified resources using
 * the $layoutDecorator that is defined by calling the #defineLayoutObjects()
 * macro.
 *#	
#macro (GetPageResource $_path)#GetResource($layoutDecoration $_path) #end
	

