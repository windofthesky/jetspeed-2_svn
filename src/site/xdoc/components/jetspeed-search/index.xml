<?xml version="1.0" ?>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at
    
    http://www.apache.org/licenses/LICENSE-2.0
    
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<document>
    <properties>
        <title>Jetspeed-2 Search</title>
        <authors>
            <person name="David Le Strat" email="dlestrat@apache.org" />
        </authors>
    </properties>
    <body>
        <section name="Search Overview">
            <p>
            Jetspeed-2 provides an integration with the popular <a href="http://lucene.apache.org/">Apache Lucene</a>, 
            a high-performance, full-featured text search engine library written entirely in Java; a technology suitable
            for nearly any application that requires full-text search, especially cross-platform.. 
            </p>
            <subsection name="SearchEngine Overview">
            <p>
            Jetspeed-2 provides a <code>SearchEngine</code> component configured as a spring component.  The <code>SearchEngine</code>
            component is configured in <code>WEB-INF/assembly/search.xml</code>.  The default implementation based on the embedded Lucene
            search engine must specify the location of the search index file, the name of the analyzer class (if null the default analyzer
            <code>StandardAnalyzer</code> is used), whether to optimize after update and the <code>HandlerFactory</code>:
            <source>
    &lt;bean id="org.apache.jetspeed.search.SearchEngine"
  	  class="org.apache.jetspeed.search.lucene.SearchEngineImpl"&gt;
  	  &lt;constructor-arg index="0"&gt;&lt;value&gt;${applicationRoot}/WEB-INF/search_index&lt;/value&gt;&lt;/constructor-arg&gt;
  	  &lt;constructor-arg index="1"&gt;&lt;null /&gt;&lt;/constructor-arg&gt;
  	  &lt;constructor-arg type="boolean"&gt;&lt;valu&gt;true&lt;/value&gt;&lt;/constructor-arg&gt;
  	  &lt;constructor-arg&gt;&lt;ref bean="org.apache.jetspeed.search.HandlerFactory"/&gt;&lt;/constructor-arg&gt;
    &lt;/bean&gt;</source>
    		</p>
    		<p>
    		The <code>HandlerFactory</code> provides the <code>SearchEngine</code> with a list of <code>ObjectHandler</code>
    		that will handle the various document types supported by Jetspeed-2 for search.  By default, Jetspeed-2 supports
    		portlet instances and portlet definitions as searchable entities.  When portlets are registered to the portal,
    		<code>searchEngine.add(pa)</code> and <code>searchEngine.add(pa.getPortletDefinitions())</code> are invoked.  This
    		action updates the Jetspeed-2 search index.  For more information on how portlets are registered to the search engine,
    		see <code>org.apache.jetspeed.tools.pamanager.PortletApplicationManager</code>.
            <br/>
            <img src="../../images/components/searchengine-c.gif" border="0"/>
            </p>
            </subsection>
            <subsection name="Document Handlers Overview">
            <p>
            Document Handlers are responsible for the parsing of a specific document type in order to index the relevant document fields.
            </p>
            <p>
            Jetspeed-2 provides 2 document handlers implementations responsible for parsing parsing the documents supported by Jetspeed-2
            as <code>org.apache.jetspeed.search.ParsedObject</code>.  The <code>ParsedObject</code> specify the list of fields
            and documents supported by Jetspeed-2 that can then be added to <code>org.apache.lucene.document.Document</code> and
            written to the index through <code>indexWriter.addDocument(doc)</code> operation of the 
            <a href="http://lucene.apache.org/java/docs/api/index.html"><code>IndexWriter</code></a>.
            </p>
            <p>
            By default, Jetspeed-2 can index portlet applications and portlet definitions respectively through the
            <code>PortletApplicationHandler</code> and <code>PortletDefinitionHandler</code>.
            <br/>
            <img src="../../images/components/searchhandlers-c.gif" border="0"/>
            </p>
            </subsection>
            <subsection name="An Extensible Framework">
            <p>
            As most components in Jetspeed-2, the search engine can easily be extended to support addional document types.
            </p>
            </subsection>
        </section>
    </body>
</document>